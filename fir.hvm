

// (Fir Code Stack)
(Fir (Fir.HALT cs) s) = (cs s)
(Fir (Fir.PUSH d cs) ss) = (Fir cs (S d ss))
(Fir (Fir.ADD cs) (S a (S b ss))) = (Fir cs (S (+ a b) ss))

// Fir flag code term
(Fire (Trip k) (Trap c) s) = (Fire (Trap k) c s)

(Fire (Trip k) (PUSH d cs) ss)
=
(Fire (Trip (- k 1)) cs (S d ss))


(Main) =
(Fir
  ( // code
    Fir.PUSH 3 (
    Fir.PUSH 2 (
    Fir.PUSH 1 (
    Fir.ADD (
    Fir.ADD (
    Fir.HALT (
    Nil
    ))))))
  )
  ( // stack
    Nil
  )
)